{
  "type": "object",
  "properties": {
    "metadata": {
      "type": "object",
      "required": ["title", "pubId", "publisher"],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "pattern": "^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$"
        },
        "title": {
          "type": "string",
          "minLength": 1
        },
        "pubId": {
          "type": "string",
          "format": "uuid",
          "pattern": "^urn:(uuid:[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}|isbn:(ISBN[-]*(1[03])*[ ]*(: ){0,1})*(([0-9Xx][- ]*){13}|([0-9Xx][- ]*){10}))$"
        },
        "author": {
          "type": ["string", "object"],
          "minLength": 1,
          "required": ["firstName", "lastName"],
          "properties": {
            "firstName": { "type": "string" },
            "lastName": { "type": "string" },
            "fileAs": { "type": "string" }
          }
        },
        "publisher": { "type": "string", "minLength": 1 }
      }
    },
    "files": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["filename"],
        "properties": {
          "hash": { "type": "string" },
          "title": { "type": "string" },
          "filename": { "type": "string" },
          "type": {
            "enum": [
              null,
              "titlepage",
              "copyright-page",
              "introduction",
              "dedication",
              "toc",
              "cover"
            ]
          },
          "headings": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["level", "title"],
              "properties": {
                "level": { "type": "number", "minimum": 1, "maximum": 6 },
                "title": { "type": "string", "minLength": 1 },
                "htmlTitle": { "type": "string" }
              }
            }
          },
          "pages": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": ["string", "null"],
                  "pattern": "^[A-z]+"
                },
                "pageNumber": {
                  "type": ["string", "number"],
                  "pattern": "^m{0,3}(cm|cd|d?c{0,3})(xc|xl|l?x{0,3})(ix|iv|v?i{0,3})$",
                  "minLength": 1
                }
              }
            }
          }
        }
      }
    }
  }
}
